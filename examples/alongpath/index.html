<!DOCTYPE>
<html>
<head>
    <script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.min.js"></script>
    <script src="../build.js"></script>
</head>
<body>
<a-scene inspector="url: https://rawgit.com/aframevr/aframe-inspector/master/dist/aframe-inspector.min.js">
    <a-assets>

    </a-assets>

    <a-curve id="track1" type="CatmullRom">
		<a-curve-point position="-2 1 -3" geometry="primitive:box; height:0.1; width:0.1; depth:0.1" material="color:#fff"></a-curve-point>
        <a-curve-point position="0 1 -3" geometry="primitive:box; height:0.1; width:0.1; depth:0.1" material="color:#fff"></a-curve-point>
        <a-curve-point position="2 1 -3" geometry="primitive:box; height:0.1; width:0.1; depth:0.1" material="color:#fff"></a-curve-point>
	</a-curve>

    <a-box color="green" width="0.25" height="0.25" depth="0.25" position="3 1 -5"
           alongpath="curve: #track1; loop:true; dur:10000">
    </a-box>

    <a-draw-curve curveref="#track1" material="shader: line; color: blue;"></a-draw-curve>

    <a-entity id="player" position="0 0 0">
        <a-camera>
            <a-cursor></a-cursor>
        </a-camera>
    </a-entity>

    <a-sky id="sky" color="#000"></a-sky>
</a-scene>
<script>
    var curvepoints = document.querySelectorAll("a-curve-point");

    for (var i = 0; i < curvepoints.length; i++) {
        curvepoints[i].addEventListener("alongpath-trigger-activated", function(){
            AFRAME.utils.entity.setComponentProperty(this, "geometry.height", "1");
        });
        curvepoints[i].addEventListener("alongpath-trigger-deactivated", function(){
            AFRAME.utils.entity.setComponentProperty(this, "geometry.height", "0.1");
        });
    }
</script>
</body>
</html>